<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local="clr-namespace:MyDbtDiaryCard.ViewModels"
             x:DataType="local:AddDayEntryViewModel"
             x:Class="MyDbtDiaryCard.Views.AddDayEntryPage"
             Title="{Binding StringDate}">
    <ContentPage.Resources>
        
        <Style TargetType="Picker" x:Key="GeneralPicker">
            <Setter Property="ItemsSource" Value="{Binding GeneralScale}"/>
            <Setter Property="SelectedIndex" Value="{Binding Converter={StaticResource ScaleToIndexCvt}, Mode=TwoWay}"/>
            <Setter Property="Grid.Column" Value="2"/>
        </Style>
        
        <Style TargetType="Picker" x:Key="UrgesPicker">
            <Setter Property="ItemsSource" Value="{Binding UrgesScale}"/>
            <Setter Property="SelectedIndex" Value="{Binding Converter={StaticResource ScaleToIndexCvt}, Mode=TwoWay }"/>
            <Setter Property="Grid.Column" Value="2"/>
        </Style>

    </ContentPage.Resources>
    
    <StackLayout>

        <ScrollView>

            <StackLayout x:Name="Items">

                <Frame x:Name="Feelings">
                    <StackLayout>

                        <Label Text="Feelings" Style="{StaticResource ItemsTitleStyle}"/>

                        <Grid ColumnDefinitions="2">
                            <Label Text="Emotional Misery:" Grid.Column="1" Grid.Row="1"/>
                            <Picker Style="{StaticResource GeneralPicker}"
                                    Title="Emotional Misery" Grid.Row="1"
                                    SelectedIndex="{Binding DayFeelings.EmotionMisery, Converter={StaticResource ScaleToIndexCvt}}"/>

                            <Label Text="Physical Misery:" Grid.Column="1" Grid.Row="2"/>
                            <Picker Style="{StaticResource GeneralPicker}" 
                                    Title="Physical Misery" Grid.Row="2"
                                    SelectedIndex="{Binding DayFeelings.PhysicalMisery, Converter={StaticResource ScaleToIndexCvt}}"/>

                            <Label Text="Excitation:" Grid.Column="1" Grid.Row="3"/>
                            <Picker Style="{StaticResource GeneralPicker}"
                                    Title="Excitation" Grid.Row="3"
                                    SelectedIndex="{Binding DayFeelings.Excitation, Converter={StaticResource ScaleToIndexCvt}}"/>
                        </Grid>

                        <Label Text="Additional comments:"/>
                        <Editor Text="{Binding DayFeelings.Additional}" AutoSize="TextChanges"/>

                    </StackLayout>
                </Frame>

                <Frame x:Name="Emotions">
                    <StackLayout>

                        <Label Text="Emotions" Style="{StaticResource ItemsTitleStyle}"/>

                        <Grid ColumnDefinitions="2">
                            <Label Text="Anger: " Grid.Column="1" Grid.Row="1"/>
                            <Picker Style="{StaticResource GeneralPicker}"
                                    Title="Anger" Grid.Column="2" Grid.Row="1"
                                    SelectedIndex="{Binding DayEmotions.Anger}"/>

                            <Label Text="Sadness:" Grid.Column="1" Grid.Row="2"/>
                            <Picker Style="{StaticResource GeneralPicker}" 
                                    Title="Sadness" Grid.Column="2" Grid.Row="2"
                                    SelectedIndex="{Binding DayEmotions.Sadness}"/>

                            <Label Text="Fear: " Grid.Column="1" Grid.Row="3"/>
                            <Picker Style="{StaticResource GeneralPicker}"
                                    Title="Fear" Grid.Column="2" Grid.Row="3"
                                    SelectedIndex="{Binding DayEmotions.Fear}"/>

                            <Label Text="Shame: " Grid.Column="1" Grid.Row="4"/>
                            <Picker Style="{StaticResource GeneralPicker}"
                                    Title="Shame" Grid.Column="2" Grid.Row="4"
                                    SelectedIndex="{Binding DayEmotions.Shame}"/>

                            <Label Text="Joy: " Grid.Column="1" Grid.Row="5"/>
                            <Picker Style="{StaticResource GeneralPicker}"
                                    Title="Joy" Grid.Column="2" Grid.Row="5"
                                    SelectedIndex="{Binding DayEmotions.Joy}"/>

                            <Label Text="Pride: " Grid.Column="1" Grid.Row="6"/>
                            <Picker Style="{StaticResource GeneralPicker}"
                                    Title="Pride" Grid.Column="2" Grid.Row="6"
                                    SelectedIndex="{Binding DayEmotions.Pride}"/>

                        </Grid>

                    </StackLayout>
                </Frame>

                <Frame>
                    <StackLayout>
                        
                        <Label Text="Urges" Style="{StaticResource ItemsTitleStyle}"/>
                        
                        <Grid ColumnDefinitions="2">

                            <Label Text="Selfham: " Grid.Column="1" Grid.Row="1"/>
                            <Picker Style="{StaticResource UrgesPicker}"
                                    Title="Selfharm" Grid.Row="1"
                                    SelectedIndex="{Binding DayUrges.SelfHarm}"/>
                            
                            <Label Text="Suicide: " Grid.Column="1" Grid.Row="2"/>
                            <Picker Style="{StaticResource UrgesPicker}"
                                    Title="Suicide" Grid.Row="2"
                                    SelectedIndex="{Binding DayUrges.Suicide}"/>

                            <Label Text="Drugs: " Grid.Column="1" Grid.Row="3"/>
                            <Picker Style="{StaticResource UrgesPicker}"
                                    Title="Drugs" Grid.Row="3"
                                    SelectedIndex="{Binding DayUrges.Drugs}"/>

                            <Label Text="Alcohol: " Grid.Column="1" Grid.Row="4"/>
                            <Picker Style="{StaticResource UrgesPicker}"
                                    Title="Alcohol" Grid.Row="4"
                                    SelectedIndex="{Binding DayUrges.Alcohol}"/>

                        </Grid>
                    </StackLayout>
                </Frame>

                <Button x:Name="btnSave" Command="{Binding SaveCommand}" Text="Save"/>
                
                <Button x:Name="btnDelete" Command="{Binding DeleteCommand}" Text="Delete"
                        IsVisible="{Binding IsEntryExistsInDb}"/>

            </StackLayout>
        </ScrollView>
        
    </StackLayout>

</ContentPage>